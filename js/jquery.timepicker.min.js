Date.prototype.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];Date.prototype.getMonthName=function(){return this.monthNames[this.getMonth()]};Date.prototype.getShortMonthName=function(){return this.getMonthName().substr(0,3)};Date.prototype.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Date.prototype.getDayName=function(){return this.dayNames[this.getDay()]};Date.prototype.getShortDayName=function(){return this.getDayName().substr(0,3)};(function(e){e.fn.timePicker=function(t){function n(e,t){e=e.replace("shortMonthName",t.getShortMonthName());e=e.replace("monthName",t.getMonthName());e=e.replace("shortDayName",t.getShortDayName());e=e.replace("dayName",t.getDayName());e=e.replace("date",t.getDate());return e}function r(t,r){for(var i=o.datePicker.numOfDates;i>0;i--){var s=e(o.datePicker.date.html);s.addClass(o.datePicker.date.className).attr("data-date",r.getTime()).html(n(o.datePicker.date.text,r)).appendTo(t);undefined!==e.fn.timePicker.variables.selectedDatesArr[r.getTime()]&&s.addClass(o.datePicker.date.selectedClassName);r.setDate(r.getDate()+1)}}function i(t,r){""!==o.timePicker.wrapper.htmlBefore&&e("."+o.timePicker.wrapper.htmlBeforeClassName,t).length===0&&e(o.timePicker.wrapper.htmlBefore).addClass(o.timePicker.wrapper.htmlBeforeClassName).prependTo(t);var i=e(o.timePicker.time.html);i.addClass(o.timePicker.time.className).attr("data-date",r.getTime()).html(n(o.timePicker.time.text,r));var s=e("<select></select>");s.attr("name",o.timePicker.time.selectFieldName+"[]").appendTo(i);var u=e.fn.timePicker.createFriendlyTimesArr(o.timePicker.time.startTime,o.timePicker.time.endTime,o.timePicker.time.interval);for(var a=0;a<u.length;a++){var f=e('<option value="'+u[a]+'">'+u[a]+"</option>");u[a]===o.timePicker.time.preSelected&&f.prop("selected","selected");f.appendTo(s)}var l=!1;e("."+o.timePicker.time.className,t).each(function(){if(e(this).attr("data-date")>r.getTime()){i.insertBefore(this);l=!0;return!1}});l||i.appendTo(t);o.timePicker.time.added.call(i)}function s(t,n){e("[data-date="+n.getTime()+"]",t).remove();e("."+o.timePicker.time.className,t).length===0&&t.empty();o.timePicker.time.removed.call(t)}var o=e.extend(!0,{},e.fn.timePicker.defaults,t);return this.each(function(){var t=e(this).empty(),n=e(o.datePicker.wrapper.html);""!==o.datePicker.wrapper.htmlBefore&&e(o.datePicker.wrapper.htmlBefore).addClass(o.datePicker.wrapper.htmlBeforeClassName).appendTo(n);n.addClass(o.datePicker.wrapper.className).appendTo(t);var u=e(o.datePicker.prev.html);u.addClass(o.datePicker.prev.className).html(o.datePicker.prev.text).on("click",function(){var t=e("."+o.datePicker.date.className+":first",n),i=parseInt(t.attr("data-date"),10),s=new Date(i);if(!o.datePicker.allowPastDates&&s.toDateString()===e.fn.timePicker.variables.now.toDateString())return!1;if(!o.datePicker.allowPastDates&&s<e.fn.timePicker.variables.now)return!1;a.empty();s.setDate(s.getDate()-1);r(a,s)}).appendTo(n);var a=e(o.datePicker.dates.html);a.addClass(o.datePicker.dates.className).on("click","."+o.datePicker.date.className,function(){var t=0;for(var n in e.fn.timePicker.variables.selectedDatesArr)t++;var r=e(this),u=parseInt(r.attr("data-date"),10);if(undefined===e.fn.timePicker.variables.selectedDatesArr[u]){if(t>=o.numberOfTimes)return!1;e.fn.timePicker.variables.selectedDatesArr[u]=1;i(l,new Date(u))}else{delete e.fn.timePicker.variables.selectedDatesArr[u];s(l,new Date(u))}o.datePicker.date.addSelectedClassOnClick&&r.toggleClass(o.datePicker.date.selectedClassName)}).appendTo(n);var f=e(o.datePicker.next.html);f.addClass(o.datePicker.next.className).html(o.datePicker.next.text).on("click",function(){var t=e("."+o.datePicker.date.className+":first",n),i=parseInt(t.attr("data-date"),10),s=new Date(i);a.empty();s.setDate(s.getDate()+1);r(a,s)}).appendTo(n);var l=e(o.timePicker.wrapper.html);l.addClass(o.timePicker.wrapper.className).appendTo(t);r(a,new Date(e.fn.timePicker.variables.now.getTime()))})};e.fn.timePicker.defaults={numberOfTimes:3,datePicker:{numOfDates:5,allowPastDates:!1,wrapper:{htmlBefore:"<p>First, choose three dates:</p>",htmlBeforeClassName:"TPDatePickerHtmlBefore",html:"<div />",className:"TPDatePicker"},prev:{className:"TPDatePickerPrev",html:"<span />",text:"&#9664;"},dates:{className:"TPDatePickerDates",html:"<span />"},date:{className:"TPDatePickerDate",selectedClassName:"selected",addSelectedClassOnClick:!0,html:"<span />",text:"<small>shortMonthName</small> <b>date</b> <small>shortDayName</small>"},next:{className:"TPDatePickerNext",html:"<span />",text:"&#9654;"}},timePicker:{wrapper:{htmlBefore:"<p>Now, please select your available times:</p>",htmlBeforeClassName:"TPTimePickerHtmlBefore",html:"<div />",className:"TPTimePicker"},time:{className:"TPTimePickerTime",preSelected:"7:00am",startTime:"6:00",endTime:"19:00",interval:15,selectFieldName:"time",html:"<span />",text:"<small>shortMonthName</small> <b>date</b> <small>shortDayName</small>",added:function(){},removed:function(){}}}};e.fn.timePicker.variables={selectedDatesArr:[],now:new Date};e.fn.timePicker.createDateObjFromTime=function(e,t){function n(e){return!isNaN(parseFloat(e))&&isFinite(e)}var r=e.split(":");r[0]=n(r[0])?parseInt(r[0],10):0;r[1]=n(r[1])?parseInt(r[1],10):0;r[2]=n(r[2])?parseInt(r[2],10):0;undefined===t&&(t=new Date);t.setHours(r[0]);t.setMinutes(r[1]);t.setSeconds(r[2]);return t};e.fn.timePicker.createFriendlyTimesArr=function(t,n,r){undefined===t&&(t="00:00");var i=e.fn.timePicker.createDateObjFromTime(t),s=e.fn.timePicker.createDateObjFromTime(n),o=[];while(s>=i){var u=""+i.getMinutes();u.length===1&&(u="0"+u);var a=i.getHours();a===0?a="12:"+u+"am":a<12?a=a+":"+u+"am":a===12?a="12:"+u+"pm":a=a-12+":"+u+"pm";o.push(a);i.setTime(i.getTime()+r*60*1e3)}return o}})(jQuery);